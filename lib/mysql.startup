//Run in Server
CREATE DATABASE education DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;
CREATE USER 'sqluser'@'localhost' IDENTIFIED BY 'sqluser';
GRANT ALL PRIVILEGES ON education . * TO 'sqluser'@'localhost';

//Run in DB
CREATE TABLE tbco (
				CoCode INT(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
				CoFullName VARCHAR(50),
				CoName VARCHAR(50),
				CoAddress VARCHAR(255),
				CoTel VARCHAR(50),
				CoContact VARCHAR(50),
				CoEmail VARCHAR(50),
				CoFax VARCHAR(50),
				CoStatus VARCHAR(10),
				Created TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00',
				Modified TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
			) CHARACTER SET utf8 COLLATE utf8_general_ci; 

CREATE TABLE tbstudent (
				StuCode INT(10) NOT NULL AUTO_INCREMENT,
				CoCode INT(10) NOT NULL,
				StuName VARCHAR(50),
				StuSex VARCHAR(10),
				StuBirth DATE,
				StuAddress VARCHAR(255),
				StuFather VARCHAR(50),
				StuFatherTel VARCHAR(50),
				StuMum VARCHAR(50),
				StuMumTel VARCHAR(50),
				StuContact VARCHAR(50),
				StuContactTel VARCHAR(50),
				StuRemark VARCHAR(255),
				StuGrad VARCHAR(10),
				StuPic VARCHAR(50),
				Created TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00',
				Modified TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
				PRIMARY KEY (StuCode, CoCode),
				FOREIGN KEY (CoCode)
					REFERENCES tbco(CoCode)
			) CHARACTER SET utf8 COLLATE utf8_general_ci; 
			
			
CREATE TABLE tbcard (
				CardId VARCHAR(50) NOT NULL PRIMARY KEY,
				CoCode INT(10),
				StuCode INT(10),
				Created TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00',
				Modified TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
				FOREIGN KEY (CoCode)
					REFERENCES tbco(CoCode),
				FOREIGN KEY (StuCode)
					REFERENCES tbstudent(StuCode)
			) CHARACTER SET utf8 COLLATE utf8_general_ci; 
			
CREATE TABLE tbattend (
				AttId INT(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
				AttDate DATETIME,
				CardId VARCHAR(50),
				StuCode INT(10), 
				CoCode INT(10),
				Created TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00',
				Modified TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
				FOREIGN KEY (CardId)
					REFERENCES tbcard(CardId),
				FOREIGN KEY (CoCode)
					REFERENCES tbco(CoCode),
				FOREIGN KEY (StuCode)
					REFERENCES tbstudent(StuCode)
			) CHARACTER SET utf8 COLLATE utf8_general_ci; 
			
CREATE TABLE tbstustatus (
				StuCode INT(10), 
				CoCode INT(10), 
				StuStatus VARCHAR(10), 
				StuArriveTime DATETIME,
				StuPickupStatus VARCHAR(10),
				StuPickupArriveTime DATETIME,
				StuLeaveTime DATETIME,
				Created TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00',
				Modified TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
				PRIMARY KEY (StuCode, CoCode),
				FOREIGN KEY (CoCode)
					REFERENCES tbco(CoCode),
				FOREIGN KEY (StuCode)
					REFERENCES tbstudent(StuCode)
			) CHARACTER SET utf8 COLLATE utf8_general_ci; 
			
CREATE TABLE tbaudit (
				AuditId INT(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
				StuCode INT(10) NOT NULL, 
				CoCode INT(10) NOT NULL, 
				AuditDate DATETIME,
				AuditRec VARCHAR(50),
				Created TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00',
				Modified TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
				FOREIGN KEY (CoCode)
					REFERENCES tbco(CoCode),
				FOREIGN KEY (StuCode)
					REFERENCES tbstudent(StuCode)
			) CHARACTER SET utf8 COLLATE utf8_general_ci; 
			
CREATE TABLE tbuser (
				UserId INT(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
				UserName VARCHAR(50) NOT NULL,
				UserPw VARCHAR(50) NOT NULL,
				UserRole VARCHAR(10) NOT NULL DEFAULT 'staff',
				CoCode INT(10) NOT NULL,
				Created TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00',
				Modified TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
				FOREIGN KEY (CoCode)
					REFERENCES tbco(CoCode)
			) CHARACTER SET utf8 COLLATE utf8_general_ci; 
			
			
CREATE TABLE tblog (
				LogId INT(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
				CoCode INT(10) NOT NULL,
				StuCode INT(10) NOT NULL,
				StuStatus VARCHAR(10) NOT NULL,
				Created TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00',
				Modified TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
				FOREIGN KEY (StuCode)
					REFERENCES tbstudent(StuCode),
				FOREIGN KEY (CoCode)
					REFERENCES tbco(CoCode)
			) CHARACTER SET utf8 COLLATE utf8_general_ci; 